{"title":"Raster Data Analysis","markdown":{"headingText":"Raster Data Analysis","containsRefs":false,"markdown":"So far, we have exclusively focused on the use of vector and tabular data. However, depending on the nature of your research problem, you may also encounter *raster data*. This week's content introduces you to raster data, map algebra, and interpolation. \n\n## Lecture slides {#slides-w06}\nYou can download the slides of this week's lecture here: [[Link]]({{< var slides.week06 >}}).\n\n## Reading list {#reading-w06}\n#### Essential readings \n- Gimond, M. 2021. Intro to GIS and spatial analysis. **Chapter 14**: *Spatial Interpolation*. [[Link]](https://mgimond.github.io/Spatial/spatial-interpolation.html)\n- Heris, M., Foks, N., Bagstad, K. 2020. A rasterized building footprint dataset for the United States. *Scientific Data* 7: 207. [[Link]](https://doi.org/10.1038/s41597-020-0542-3)\n- Thomson, D., Leasure, D., Bird, T. *et al*. 2022. How accurate are WorldPop-Global-Unconstrained gridded population data at the cell-level? A simulation analysis in urban Namibia. *Plos ONE* 17:7: e0271504. [[Link]](https://doi.org/10.1371/journal.pone.0271504)\n\n#### Suggested readings \n- Mellander, C., Lobo, J., Stolarick, K. *et al*. 2015. Night-time light data: A good proxy measure for economic activity? *PLoS ONE* 10(10): e0139779. [[Link]](https://doi.org/10.1371/journal.pone.0139779)\n\n## Raster data and interpolation\nThis week, we will use raster data to analyse population change in London. In the second half of the tutorial, we will apply data from air quality monitoring sites and use interpolation techniques to model air pollution across the city.\n\n::: {.callout-note}\nThe key difference between vector and raster models lies in their structure. Vectors are made up of points, lines, and polygons. In contrast, raster data consists of pixels (or grid cells), similar to an image. Each cell holds a single value representing a geographic phenomenon, such as population density at that location. Common raster data types include remote sensing imagery, such as satellite or LIDAR data.\n::: \n\n### Population change in Great Britain\nFor the first part of this week's practical material we will be using raster datasets from [WorldPop](https://hub.worldpop.org/). These population surfaces are estimates of counts of people, displayed within a regular grid raster of a spatial resolution of up to 100m. These datasets can be used to explore, for example, changes in the demographic profiles or area deprivation at small spatial scales.\n\n1. Navigate to the WorldPop Hub: [[Link]](https://hub.worldpop.org/)\n2. Go to **Population Count** -> **Unconstrained individual countries 2000-2020 (1km resolution)**.\n3. Type *United Kingdom* in the search bar.\n4. Download the [GeoTIFF](https://en.wikipedia.org/wiki/GeoTIFF) files for **2010** and **2020**: `gbr_ppp_2010_1km_Aggregated` and `gbr_ppp_2020_1km_Aggregated`.\n5. Save the files to your computer in your `data` folder.\n\n::: {.callout-note}\nA GeoTIFF is a type of raster file format that embeds geographic information, enabling the image to be georeferenced to specific real-world coordinates. It includes metadata like projection, coordinate system, and geographic extent, making it compatible with GIS software for spatial analysis.\n:::\n\nOpen a new script within your `GEOG0030` project and save this as `w06-raster-data-analysis.r`. \n\nBegin by loading the necessary libraries:\n\n```{r}\n#| label: 06-load-libraries\n#| classes: styled-output\n#| echo: True\n#| eval: True\n#| output: False\n#| tidy: True\n#| filename: \"R code\"\n# load libraries\nlibrary(tidyverse)\nlibrary(terra)\nlibrary(openair)\nlibrary(gstat)\nlibrary(sf)\nlibrary(tmap)\n```\n\n::: {.callout-warning}\nYou may have to install some of these libraries if you have not used these before.\n:::\n\n#### Map algebra\nWe will be using some simple map algebra to look at population change in London between 2010 and 2020. We can load the individual `GeoTiff` files that we downloaded into R and reproject them into British National Grid using the `terra` library.\n\n```{r}\n#| label: 06-load-raster\n#| classes: styled-output\n#| echo: True\n#| eval: True\n#| tidy: True\n#| filename: \"R code\"\n# load data\npop2010 <- rast('data/spatial/gbr_ppp_2010_1km_Aggregated.tif')\npop2020 <- rast('data/spatial/gbr_ppp_2020_1km_Aggregated.tif')\n\n# transform projection\npop2010 <- pop2010 |> project('EPSG:27700')\npop2020 <- pop2020 |> project('EPSG:27700')\n```\n\nCarefully examine each dataframe to understand its structure and the information it contains:\n\n```{r}\n#| label: 06-inspect-raster\n#| classes: styled-output\n#| echo: True\n#| eval: True\n#| tidy: True\n#| filename: \"R code\"\n# inspect 2010 data\nhead(pop2010)\n\n# inspect 2020 data\nhead(pop2020)\n```\n::: {.callout-note}\nA raster file is always rectangular, with areas lacking data stored as `NA`. For our population data, this means any pixels outside the land borders of Great Britain will have an `NA` values.\n:::\n\n::: {.callout-tip}\nYou can further inspect the results using the `View()` function. \n:::\n\nWe can also plot the raster files for visual inspection:\n\n```{r}\n#| label: fig-06-load-raster-data-2010\n#| fig-cap: \"WorldPop 2010 population estimates for Great Britain\"\n#| classes: styled-output\n#| echo: True\n#| eval: True\n#| tidy: True\n#| filename: \"R code\"\n# plot 2010\nplot(pop2010)\n```\n\n```{r}\n#| label: fig-06-load-raster-data-2020\n#| fig-cap: \"WorldPop 2020 population estimates for Great Britain.\"\n#| classes: styled-output\n#| echo: True\n#| eval: True\n#| tidy: True\n#| filename: \"R code\"\n# plot 2020\nplot(pop2020)\n```\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["assets/styles.css"],"toc":true,"highlight-style":"atom-one","number-sections":true,"output-file":"06-raster.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","editor":"source","_quarto-vars":{"meta":{"title":"GEOG0030"},"urls":{"w01":"01-spatial.html","w02":"02-point-pattern.html","w03":"03-operations.html","w04":"04-autocorrelation.html","w05":"05-models.html","w06":"06-raster.html","w07":"07-geodemographics.html","w08":"08-network.html","w09":"09-datavis.html","w10":"10-maps.html"},"slides":{"week01":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w01-geo.pdf","week02":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w02-geo.pdf","week03":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w03-geo.pdf","week04":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w04-geo.pdf","week05":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w05-geo.pdf","week06":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w06-geo.pdf","week07":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w07-geo.pdf","week08":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w08-geo.pdf","week09":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w09-geo.pdf","week10":"https://github.com/jtvandijk/GEOG0030/tree/master/slides/w10-geo.pdf"}},"theme":{"light":"flatly","dark":"darkly"},"callout-appearance":"simple","smooth-scroll":true,"number-depth":3,"pagetitle":"{{< var meta.title >}}"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}