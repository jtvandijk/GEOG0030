renv::status()
install.packages('yaml')
install.packages('rmarkdown')
renv::snapshot()
install.packages(sf,type='binary')
install.packages('sf',type='binary')
install.packages('sf',type='binary')
renv::snapshot()
install.packages('data.table',type='binary')
renv::snapshot()
install.packages('terra',type='binary')
renv::snapshot()
install.packages('raster',type='binary')
renv::snapshot()
renv::snapshot()
install.packages('formatR')
#| label: fig-police-data
#| echo: False
#| fig-cap: 'Downloading data on reported crimes through [data.police.uk](https://data.police.uk/)'
knitr::include_graphics('images/w02/police-data.png')
#| label: 02-load-libraries
#| classes: styled-output
#| echo: True
#| eval: True
#| output: False
#| tidy: True
#| filename: "R code"
# load libraries
library(tidyverse)
library(sf)
library(tmap)
library(osmdata)
#| label: 02-combine-csv
#| echo: True
#| eval: True
#| tidy: True
#| filename: 'R code'
# list all csv files
crime_df <- list.files(path="data/attributes/crime/", full.names=TRUE, recursive=TRUE) |>
# read individual csv files
lapply(read_csv) |>
# bind together into one
bind_rows()
crime_df
# list all csv files
crime_df <- list.files(path="data/attributes/London-Crime/", full.names=TRUE, recursive=TRUE) |>
# read individual csv files
lapply(read_csv) |>
# bind together into one
bind_rows()
crime_df
View(crime_df)
View(crime_df)
nroow(crime_df)
nrow(crime_df)
names(crime_df)
crime_df
crime_df <- crime_df |>
clean_names()
library(janitor)
clean_names()
#| label: 02-rename-fields
#| classes: styled-output
#| echo: True
#| eval: True
#| tidy: True
#| filename: "R code"
# clean names
crime_df <- crime_df |>
clean_names()
names(crime_df)
unique(crime_df$crime_type)
theft_bike
#| label: 02-filter-crime
#| classes: styled-output
#| echo: True
#| eval: True
#| tidy: True
#| filename: "R code"
# unique types
unique(crime_df$crime_type)
# filter
theft_bike <- crime_df |>
filter(crime_type == 'Bicycle theft')
theft_bike
#| label: 02-station-data
#| classes: styled-output
#| echo: True
#| eval: True
#| warning: False
#| cache: True
#| filename: 'R code'
# read spatial data
msoa21 <- st_read('data/spatial/London-MSOA-2021.gpkg')
# define our bbox coordinates, use WGS84
bbox_london <- msoa21 |>
st_transform(4326) |>
st_bbox()
msoa21
st_crs(msoa21)
t <- msoa21 |> st_transform(4326)
